#!/bin/sh -e
### Here are some observations about the data gathered from shader_test. 
### Think of this kinda like a jupyter notebook. The format goes:
#
### Comment
#code
# OUTPUT:
# the code's output

### XXX testing is new and incomplete, take everything with a grain of salt

### XXX retest w/o EP (maybe make this default)
### XXX test SW
### XXX test on different noise levels
### XXX test on a wide variety of test images
### XXX test HQ (including PSS)
### XXX test LQ
### XXX test temporal (including ME)
### XXX organize tests into subdirectories?

### Optimal standalone guided filter:
#
### Surprisingly, MEANI < 1 is actually better in some cases
#
### MEANI really likes multiples of 0.25, (the maximizer gets stuck in a 
### loop if it starts searching slightly higher/lower than 1.5)
#
#fn="guided:images:LUMA:NOISE=10:10:1080x1080:yuv444p:CAT=1:MAX=MEANI:1.5:2:3e-3:10:E=0.001,0.0025,0.005,0.0075,0.01:PREI=1,1.125...1.5:I=1,2,3,4.stats.bz2"
#bzcat "stats/$fn" | grep BASELINE
#
# OUTPUT:
# BASELINE=NOISE=10:10 0.819476491
#
#bzcat "stats/$fn" | sort -k 2 -n | tail
#
# OUTPUT:
# MEANI=1.5:E=0.001:PREI=1:I=1 0.891042782
# MEANI=0.75:E=0.0025:PREI=1.5:I=1 0.891849873
# MEANI=1.5:E=0.0025:PREI=1.375:I=1 0.892759109
# MEANI=1.5:E=0.0025:PREI=1.25:I=1 0.893501418
# MEANI=1.5:E=0.0025:PREI=1.125:I=1 0.894048255
# MEANI=1.5:E=0.0025:PREI=1:I=1 0.89437764
# MEANI=1.5:E=0.001:PREI=1.5:I=1 0.895546582
# MEANI=1.5:E=0.001:PREI=1.125:I=1 0.89563142
# MEANI=1.5:E=0.001:PREI=1.375:I=1 0.8957968
# MEANI=1.5:E=0.001:PREI=1.25:I=1 0.895904055
#
#bzcat "stats/$fn" | grep -F :I=2 | sort -k 2 -n | tail
#
# OUTPUT:
# MEANI=0.375:E=0.0025:PREI=1.5:I=2 0.870801945
# MEANI=0.375:E=0.0025:PREI=1.375:I=2 0.87102095
# MEANI=0.375:E=0.0025:PREI=1.25:I=2 0.87133773
# MEANI=0.5625:E=0.0025:PREI=1.125:I=2 0.871566055
# MEANI=0.75:E=0.0025:PREI=1:I=2 0.87180127
# MEANI=0.75:E=0.001:PREI=1.5:I=2 0.888474818
# MEANI=0.75:E=0.001:PREI=1.375:I=2 0.8887018
# MEANI=0.75:E=0.001:PREI=1:I=2 0.889102927
# MEANI=0.75:E=0.001:PREI=1.25:I=2 0.88914895
# MEANI=0.75:E=0.001:PREI=1.125:I=2 0.889274491
#
#bzcat "stats/$fn" | grep -F :I=3 | sort -k 2 -n | tail
#
# OUTPUT:
# MEANI=1.5:E=0.0025:PREI=1.5:I=3 0.840087891
# MEANI=1.5:E=0.0025:PREI=1.375:I=3 0.8514126
# MEANI=1.5:E=0.0025:PREI=1.25:I=3 0.853154218
# MEANI=1.5:E=0.0025:PREI=1.125:I=3 0.855044255
# MEANI=1.5:E=0.0025:PREI=1:I=3 0.862426836
# MEANI=1.5:E=0.001:PREI=1.5:I=3 0.8639341
# MEANI=1.5:E=0.001:PREI=1.375:I=3 0.872605891
# MEANI=1.5:E=0.001:PREI=1.25:I=3 0.8738773
# MEANI=1.5:E=0.001:PREI=1.125:I=3 0.875325582
# MEANI=1.5:E=0.001:PREI=1:I=3 0.878092582
#
#bzcat "stats/$fn" | grep -F :I=4 | sort -k 2 -n | tail
#
# OUTPUT:
# MEANI=1.5:E=0.0025:PREI=1.5:I=4 0.8435852
# MEANI=1.5:E=0.0025:PREI=1.375:I=4 0.844330055
# MEANI=1.5:E=0.0025:PREI=1.25:I=4 0.844942291
# MEANI=1.5:E=0.0025:PREI=1.125:I=4 0.845373491
# MEANI=1.5:E=0.0025:PREI=1:I=4 0.84602633
# MEANI=1.5:E=0.001:PREI=1.5:I=4 0.870876564
# MEANI=1.5:E=0.001:PREI=1.375:I=4 0.871276436
# MEANI=1.5:E=0.001:PREI=1.25:I=4 0.8717232
# MEANI=1.5:E=0.001:PREI=1.125:I=4 0.87195318
# MEANI=1.5:E=0.001:PREI=1:I=4 0.872120982
#
### A small amount of PREI subsampling does indeed improve quality
#
#bzcat "stats/$fn" | sort -k 2 -n | tail -n 3
#
# OUTPUT:
# MEANI=1.5:E=0.001:PREI=1.125:I=1 0.89563142
# MEANI=1.5:E=0.001:PREI=1.375:I=1 0.8957968
# MEANI=1.5:E=0.001:PREI=1.25:I=1 0.895904055
#
#bzcat "stats/$fn" | grep -F :PREI=1: | sort -k 2 -n | tail -n 3
#
# OUTPUT:
# MEANI=0.75:E=0.005:PREI=1:I=1 0.890238818
# MEANI=1.5:E=0.001:PREI=1:I=1 0.891042782
# MEANI=1.5:E=0.0025:PREI=1:I=1 0.89437764
#

### Upscaling
#
### shader_test works for testing upscalers
#
#fn='FSRCNNX_x2_8-0-4-1:images:LUMA:SCALE=540:540:1080x1080:yuv444p:CAT=1:MAX=:10:1.25:1e-6:Inf:.stats.bz2'
#bzcat "stats/$fn" | sort -k 2 -n
#
# OUTPUT:
# BASELINE=SCALE=540:540 0.927599
# NO_CFGOPTS 0.9498638
#
### Bicubic is scale's default
#
#fn='FSRCNNX_x2_8-0-4-1:images:LUMA:SCALE=540:540:flags=bicubic:1080x1080:yuv444p:CAT=1:MAX=:10:1.25:1e-6:Inf:.stats.bz2'
#bzcat "stats/$fn" | sort -k 2 -n
#
# OUTPUT:
# BASELINE=SCALE=540:540:flags=bicubic 0.927599
# NO_CFGOPTS 0.9498638
#
### Lanczos is better
#
#fn='FSRCNNX_x2_8-0-4-1:images:LUMA:SCALE=540:540:flags=lanczos:1080x1080:yuv444p:CAT=1:MAX=:10:1.25:1e-6:Inf:.stats.bz2'
#bzcat "stats/$fn" | sort -k 2 -n
#
# OUTPUT:
# BASELINE=SCALE=540:540:flags=lanczos 0.9326444
# NO_CFGOPTS 0.9505084
#
### nlmeans_2x is worse than baseline lol
#
#fn='NLM_2x:images:LUMA:SCALE=540:540:1080x1080:yuv444p:CAT=1:MAX=:10:1.25:1e-6:Inf:.stats.bz2'
#bzcat "stats/$fn" | sort -k 2 -n
#
# OUTPUT:
# NO_CFGOPTS 0.9022264
# BASELINE=SCALE=540:540 0.927599
#

### Reverse chroma subsampling
#
### Nothing seems to perform very well
#
#fn='KrigBilateral:images:CHROMA:FORMAT=yuv420p:1080x1080:yuv444p:CAT=1:MAX=:10:1.25:1e-6:Inf:.stats.bz2'
#bzcat "stats/$fn" | sort -k 2 -n
#
# OUTPUT:
# NO_CFGOPTS 0.9862585
# BASELINE=FORMAT=yuv420p 0.9867304
#
#fn='NLM_lgc:images:CHROMA:FORMAT=yuv420p:1080x1080:yuv444p:CAT=1:MAX=:10:1.25:1e-6:Inf:.stats.bz2'
#bzcat "stats/$fn" | sort -k 2 -n
#
# OUTPUT:
# NO_CFGOPTS 0.9861952
# BASELINE=FORMAT=yuv420p 0.9867304
#
### Guided LGC scored much lower
#
#fn='guided_lgc:images:CHROMA:FORMAT=yuv420p:1080x1080:yuv444p:CAT=1:MAX=:10:1.25:1e-6:Inf:.stats.bz2'
#bzcat "stats/$fn" | sort -k 2 -n
#
# OUTPUT:
# NO_CFGOPTS 0.9731073
# BASELINE=FORMAT=yuv420p 0.9867304
#

### NLM's EP option doesn't perform well on SSIM, not a surprise:
#
#fn='NLM:images:LUMA:NOISE=10:10:1080x1080:yuv444p:CAT=1:MAX=S:5:1.25:1e-6:Inf:EP=0,1.stats.bz2'
#bzcat "stats/$fn" | sort -k 2 -n | tail
#
# OUTPUT:
# BASELINE=NOISE=10:10 0.819476491
# S=5.533854:EP=1 0.893021327
# S=4:EP=0 0.897298291
#
### Adjusting DP/BP doesn't seem to help
#
#fn='NLM:images:LUMA:NOISE=10:10:1080x1080:yuv444p:CAT=1:MAX=S:5:1.25:1e-6:Inf:DP=0.0,0.5...3.0:BP=0.0,0.5...3.0.stats.bz2'
#bzcat "stats/$fn" | sort -k 2 -n | tail
#
# OUTPUT:
# S=4.5:DP=0:BP=3 0.889693291
# S=7.8125:DP=0.5:BP=1 0.88986745
# S=4.375:DP=0:BP=2.5 0.890410055
# S=4.5:DP=0:BP=2 0.891274636
# S=6.510417:DP=0.5:BP=0.5 0.891562055
# S=4.4:DP=0:BP=1.5 0.89235113
# S=5.25:DP=0.5:BP=0 0.893091036
# S=4.4:DP=0:BP=1 0.893733582
# S=4.2:DP=0:BP=0.5 0.895552418
# S=4:DP=0:BP=0 0.897298291
#

### The optimal standalone guided filter is also optimal for injecting into NLM:
#
#fn='NLM:images:LUMA:NOISE=10:10:1080x1080:yuv444p:CAT=1:MAX=S:5:1.25:1e-6:Inf:GUIDED_E=0.001,0.0025,0.005,0.0075,0.01:GUIDED_MEANI=1.375,1.5,1.625:GUIDED_PREI=1.125,1.25,1.5,1.75:EP=0.stats.bz2'
#bzcat "stats/$fn" | sort -k 2 -n | tail
#
# OUTPUT:
# S=3.04:GUIDED_E=0.0025:GUIDED_MEANI=1.5:GUIDED_PREI=1.125:EP=0 0.896795145
# S=4.75:GUIDED_E=0.001:GUIDED_MEANI=1.375:GUIDED_PREI=1.125:EP=0 0.896862873
# S=4.5:GUIDED_E=0.001:GUIDED_MEANI=1.375:GUIDED_PREI=1.25:EP=0 0.896891855
# S=3.8:GUIDED_E=0.001:GUIDED_MEANI=1.625:GUIDED_PREI=1.5:EP=0 0.897049036
# S=3.666667:GUIDED_E=0.001:GUIDED_MEANI=1.5:GUIDED_PREI=1.75:EP=0 0.89707505
# S=4.4:GUIDED_E=0.001:GUIDED_MEANI=1.625:GUIDED_PREI=1.125:EP=0 0.897140491
# S=4.2:GUIDED_E=0.001:GUIDED_MEANI=1.625:GUIDED_PREI=1.25:EP=0 0.897172836
# S=4:GUIDED_E=0.001:GUIDED_MEANI=1.5:GUIDED_PREI=1.5:EP=0 0.89724473
# S=4.583333:GUIDED_E=0.001:GUIDED_MEANI=1.5:GUIDED_PREI=1.125:EP=0 0.897384418
# S=4.4:GUIDED_E=0.001:GUIDED_MEANI=1.5:GUIDED_PREI=1.25:EP=0 0.8974382
#

### NLM guided by fast guided filter seems to work very well for anime
#
#fn="NLM:mountain_adventurer:LUMA:NOISE=10:RZ=10:CAT=1:S=3.5,5,6.25:RF='.._guided.glsl':GUIDED_MEANI=1.375,1.5,1.625:GUIDED_E=0.0009,0.0010...0.0015:GUIDED_PREI=1.25,1.5...2.0:GUIDED_I=1,2,3,4.stats.bz2"
#bzcat "stats/$fn" | sort -k 3 -n | tail
#
# OUTPUT:
# S=3.5:RF=../guided.glsl:GUIDED_MEANI=1.5:GUIDED_E=0.0012:GUIDED_PREI=2:GUIDED_I=2 Y 0.9289317 U 0.8519957 V 0.8507858 All 0.9030847
# S=3.5:RF=../guided.glsl:GUIDED_MEANI=1.5:GUIDED_E=0.0013:GUIDED_PREI=2:GUIDED_I=2 Y 0.9289331 U 0.8519958 V 0.8507859 All 0.9030857
# S=3.5:RF=../guided.glsl:GUIDED_MEANI=1.5:GUIDED_E=0.0013:GUIDED_PREI=1.25:GUIDED_I=2 Y 0.9289519 U 0.8519961 V 0.8507862 All 0.9030984
# S=3.5:RF=../guided.glsl:GUIDED_MEANI=1.5:GUIDED_E=0.0012:GUIDED_PREI=1.5:GUIDED_I=2 Y 0.9289568 U 0.8519959 V 0.8507862 All 0.9031017
# S=3.5:RF=../guided.glsl:GUIDED_MEANI=1.5:GUIDED_E=0.001:GUIDED_PREI=1.25:GUIDED_I=2 Y 0.9289623 U 0.851995 V 0.850786 All 0.9031051
# S=3.5:RF=../guided.glsl:GUIDED_MEANI=1.5:GUIDED_E=0.0009:GUIDED_PREI=1.5:GUIDED_I=2 Y 0.928966 U 0.8519978 V 0.8507864 All 0.9031082
# S=3.5:RF=../guided.glsl:GUIDED_MEANI=1.5:GUIDED_E=0.0012:GUIDED_PREI=1.25:GUIDED_I=2 Y 0.9289784 U 0.8519951 V 0.8507861 All 0.9031158
# S=3.5:RF=../guided.glsl:GUIDED_MEANI=1.5:GUIDED_E=0.0011:GUIDED_PREI=1.25:GUIDED_I=2 Y 0.9289878 U 0.8519961 V 0.8507862 All 0.9031222
# S=3.5:RF=../guided.glsl:GUIDED_MEANI=1.5:GUIDED_E=0.0011:GUIDED_PREI=1.5:GUIDED_I=2 Y 0.92899 U 0.8519956 V 0.8507863 All 0.9031238
# S=3.5:RF=../guided.glsl:GUIDED_MEANI=1.5:GUIDED_E=0.001:GUIDED_PREI=1.5:GUIDED_I=2 Y 0.9289957 U 0.8519934 V 0.8507864 All 0.903127
#
### Non-fast guided filter seems to work best when standalone though
#
### Also worth noting that this is outperforming NLM
#
#fn="guided:mountain_adventurer:LUMA:NOISE=10:RZ=10:CAT=1:MEANI=1.375,1.5,1.625:E=0.0009,0.0010...0.0015:PREI=1.25,1.5...2.0:I=1,2,3,4.stats.bz2"
#bzcat "stats/$fn" | sort -k 3 -n | tail
#
# OUTPUT:
# MEANI=1.5:E=0.0011:PREI=1.5:I=1 Y 0.9285681 U 0.8519953 V 0.8507861 All 0.9028422
# MEANI=1.5:E=0.0015:PREI=1.25:I=1 Y 0.9286878 U 0.8519974 V 0.8507859 All 0.9029224
# MEANI=1.5:E=0.001:PREI=1.5:I=1 Y 0.9288154 U 0.8519965 V 0.8507858 All 0.9030073
# MEANI=1.5:E=0.0009:PREI=1.5:I=1 Y 0.9288872 U 0.8519971 V 0.8507863 All 0.9030555
# MEANI=1.5:E=0.0014:PREI=1.25:I=1 Y 0.9290727 U 0.8519984 V 0.850786 All 0.9031791
# MEANI=1.5:E=0.0013:PREI=1.25:I=1 Y 0.9293994 U 0.8519985 V 0.850786 All 0.9033971
# MEANI=1.5:E=0.0009:PREI=1.25:I=1 Y 0.9294709 U 0.8519987 V 0.8507864 All 0.903445
# MEANI=1.5:E=0.0012:PREI=1.25:I=1 Y 0.9296498 U 0.8519976 V 0.8507861 All 0.903564
# MEANI=1.5:E=0.001:PREI=1.25:I=1 Y 0.929748 U 0.852 V 0.8507863 All 0.9036297
# MEANI=1.5:E=0.0011:PREI=1.25:I=1 Y 0.929784 U 0.8519984 V 0.850786 All 0.9036534
#

### XXX retest everything below this point

### Fast guided filter works very well on chroma
#
#fn="NLM:vibrant_embroidery:CHROMA:NOISE=10:RZ=10:CAT=1:RF='.._guided.glsl':S=5,5.5...9:GUIDED_MEANI=1.5,2,2.5:GUIDED_PREI=1.125,1.25...1.75:GUIDED_I=1,2,3,4.stats.bz2"
#bzcat "stats/$fn" | sort -k 9 -n | tail
#
# OUTPUT:
# RF=../guided.glsl:S=5:GUIDED_MEANI=2:GUIDED_PREI=1.625:GUIDED_I=2 Y 0.8676777 U 0.9565478 V 0.9546859 All 0.8969909
# RF=../guided.glsl:S=5.5:GUIDED_MEANI=2:GUIDED_PREI=1.75:GUIDED_I=2 Y 0.8676777 U 0.9564884 V 0.9547509 All 0.8969914
# RF=../guided.glsl:S=6.5:GUIDED_MEANI=2:GUIDED_PREI=1.25:GUIDED_I=2 Y 0.8676777 U 0.9564377 V 0.9548022 All 0.8969918
# RF=../guided.glsl:S=5.5:GUIDED_MEANI=2:GUIDED_PREI=1.375:GUIDED_I=2 Y 0.8676777 U 0.9565221 V 0.9547186 All 0.8969919
# RF=../guided.glsl:S=6:GUIDED_MEANI=2:GUIDED_PREI=1.25:GUIDED_I=2 Y 0.8676777 U 0.9564894 V 0.9547555 All 0.8969926
# RF=../guided.glsl:S=5.5:GUIDED_MEANI=2:GUIDED_PREI=1.5:GUIDED_I=2 Y 0.8676777 U 0.9565242 V 0.9547397 All 0.8969956
# RF=../guided.glsl:S=6:GUIDED_MEANI=2:GUIDED_PREI=1.375:GUIDED_I=2 Y 0.8676777 U 0.9564907 V 0.9547726 All 0.8969956
# RF=../guided.glsl:S=6:GUIDED_MEANI=2:GUIDED_PREI=1.625:GUIDED_I=2 Y 0.8676777 U 0.9564645 V 0.9547987 All 0.8969956
# RF=../guided.glsl:S=6:GUIDED_MEANI=2:GUIDED_PREI=1.5:GUIDED_I=2 Y 0.8676777 U 0.9564764 V 0.954788 All 0.8969958
# RF=../guided.glsl:S=5.5:GUIDED_MEANI=2:GUIDED_PREI=1.625:GUIDED_I=2 Y 0.8676777 U 0.9565176 V 0.9547574 All 0.8969975
#
### Even better when standalone
#
#fn="guided:vibrant_embroidery:CHROMA:NOISE=10:RZ=10:CAT=1:MEANI=1.5,2,2.5:PREI=1.125,1.25...1.75:I=1,2,3,4.stats.bz2"
#bzcat "stats/$fn" | sort -k 9 -n | tail
#
# OUTPUT:
# MEANI=1.5:PREI=1.5:I=2 Y 0.8676779 U 0.9598192 V 0.9535627 All 0.8973489
# MEANI=1.5:PREI=1.375:I=2 Y 0.8676779 U 0.9599518 V 0.9537641 All 0.8974046
# MEANI=1.5:PREI=1.25:I=2 Y 0.8676779 U 0.9600952 V 0.953908 All 0.8974523
# MEANI=1.5:PREI=1.125:I=2 Y 0.8676779 U 0.9601725 V 0.953983 All 0.8974778
# MEANI=2:PREI=1.75:I=1 Y 0.8676778 U 0.9615006 V 0.9574561 All 0.8982779
# MEANI=2:PREI=1.625:I=1 Y 0.8676778 U 0.9618075 V 0.9577114 All 0.8983718
# MEANI=2:PREI=1.125:I=1 Y 0.8676778 U 0.9617915 V 0.9579148 All 0.898403
# MEANI=2:PREI=1.5:I=1 Y 0.8676778 U 0.9620791 V 0.9579627 All 0.8984588
# MEANI=2:PREI=1.375:I=1 Y 0.8676778 U 0.9620599 V 0.9580543 All 0.8984708
# MEANI=2:PREI=1.25:I=1 Y 0.8676778 U 0.962092 V 0.9581352 All 0.8984897
#
### Even better on anime
#
#fn="NLM:mountain_adventurer:CHROMA:NOISE=10:RZ=10:CAT=1:RF='.._guided.glsl':S=9,10...20:GUIDED_MEANI=1.5,2,2.5:GUIDED_PREI=1.75:GUIDED_I=1,2,3,4.stats.bz2"
#bzcat "stats/$fn" | sort -k 9 -n | tail
#
# OUTPUT:
# RF=../guided.glsl:S=16:GUIDED_MEANI=1.5:GUIDED_PREI=1.75:GUIDED_I=2 Y 0.8305819 U 0.9536409 V 0.9523954 All 0.871394
# RF=../guided.glsl:S=10:GUIDED_MEANI=2:GUIDED_PREI=1.75:GUIDED_I=2 Y 0.8305819 U 0.9536413 V 0.9524045 All 0.8713954
# RF=../guided.glsl:S=14:GUIDED_MEANI=2:GUIDED_PREI=1.75:GUIDED_I=2 Y 0.8305819 U 0.9536459 V 0.9524063 All 0.8713965
# RF=../guided.glsl:S=15:GUIDED_MEANI=1.5:GUIDED_PREI=1.75:GUIDED_I=2 Y 0.8305819 U 0.9536501 V 0.9524041 All 0.8713968
# RF=../guided.glsl:S=12:GUIDED_MEANI=1.5:GUIDED_PREI=1.75:GUIDED_I=2 Y 0.8305819 U 0.9536626 V 0.9523986 All 0.8713981
# RF=../guided.glsl:S=14:GUIDED_MEANI=1.5:GUIDED_PREI=1.75:GUIDED_I=2 Y 0.8305819 U 0.953662 V 0.9524088 All 0.8713999
# RF=../guided.glsl:S=13:GUIDED_MEANI=1.5:GUIDED_PREI=1.75:GUIDED_I=2 Y 0.8305819 U 0.9536666 V 0.9524058 All 0.8714
# RF=../guided.glsl:S=11:GUIDED_MEANI=2:GUIDED_PREI=1.75:GUIDED_I=2 Y 0.8305819 U 0.9536566 V 0.952418 All 0.8714002
# RF=../guided.glsl:S=13:GUIDED_MEANI=2:GUIDED_PREI=1.75:GUIDED_I=2 Y 0.8305819 U 0.9536568 V 0.9524175 All 0.8714003
# RF=../guided.glsl:S=12:GUIDED_MEANI=2:GUIDED_PREI=1.75:GUIDED_I=2 Y 0.8305819 U 0.9536614 V 0.9524213 All 0.8714016
#
### Note that standalone fast guided filter is better than NLM for anime
#
#fn="guided:mountain_adventurer:CHROMA:NOISE=10:RZ=10:CAT=1:MEANI=1.125,1.25...2:PREI=1.25,1.5,1.75:I=1,2,3,4.stats.bz2"
#bzcat "stats/$fn" | sort -k 9 -n | tail
#
# OUTPUT:
# MEANI=1.125:PREI=1.75:I=2 Y 0.8305822 U 0.9731669 V 0.9717112 All 0.8778677
# MEANI=1.25:PREI=1.25:I=2 Y 0.8305822 U 0.9731837 V 0.9717981 All 0.877885
# MEANI=1.25:PREI=1.5:I=2 Y 0.8305822 U 0.9733306 V 0.9719369 All 0.8779328
# MEANI=1.25:PREI=1.75:I=2 Y 0.8305822 U 0.9734304 V 0.9719788 All 0.8779563
# MEANI=2:PREI=1.75:I=2 Y 0.8305822 U 0.9739187 V 0.972212 All 0.8780766
# MEANI=1.5:PREI=1.25:I=2 Y 0.8305822 U 0.9739037 V 0.9724659 All 0.8781164
# MEANI=2:PREI=1.5:I=2 Y 0.8305822 U 0.9740056 V 0.9723659 All 0.8781168
# MEANI=2:PREI=1.25:I=2 Y 0.8305822 U 0.9740196 V 0.9724258 All 0.8781289
# MEANI=1.5:PREI=1.75:I=2 Y 0.8305821 U 0.9741223 V 0.9725856 All 0.8781727
# MEANI=1.5:PREI=1.5:I=2 Y 0.8305821 U 0.9741327 V 0.972664 All 0.878188
#

### Guided LGC seems to slightly benefit from high E
#
### Guided LGC never quite outperforms non-LGC guided
#
### Note: PREI isn't relevant here, LGC does not accept the parameter, 
### I tested it on accident
#
#fn="guided:vibrant_embroidery:CHROMA:NOISE=10:RZ=10:CAT=1:MEANI=1.875,1.9375,2:E=9:PREI=129_128,65_64...1.25:I='SHARE_LUMA'.stats.bz2"
#bzcat "stats/$fn" | sort -k 9 -n | tail
#
# OUTPUT:
# MEANI=2:E=9:PREI=1.140625:I=SHARE_LUMA Y 0.8676776 U 0.9499157 V 0.9507854 All 0.8952351
# MEANI=2:E=9:PREI=1.1875:I=SHARE_LUMA Y 0.8676777 U 0.9498078 V 0.9508956 All 0.8952356
# MEANI=2:E=9:PREI=1.179688:I=SHARE_LUMA Y 0.8676776 U 0.9498675 V 0.950874 All 0.895242
# MEANI=2:E=9:PREI=1.101563:I=SHARE_LUMA Y 0.8676777 U 0.9495778 V 0.951165 All 0.8952422
# MEANI=2:E=9:PREI=1.125:I=SHARE_LUMA Y 0.8676777 U 0.9495181 V 0.95125 All 0.8952464
# MEANI=2:E=9:PREI=1.109375:I=SHARE_LUMA Y 0.8676777 U 0.9495844 V 0.9512042 All 0.89525
# MEANI=2:E=9:PREI=1.054688:I=SHARE_LUMA Y 0.8676777 U 0.9497355 V 0.95111 All 0.8952593
# MEANI=2:E=9:PREI=1.0625:I=SHARE_LUMA Y 0.8676777 U 0.9497836 V 0.9511325 All 0.895271
# MEANI=2:E=9:PREI=1.078125:I=SHARE_LUMA Y 0.8676777 U 0.9497595 V 0.9512098 All 0.89528
# MEANI=2:E=9:PREI=1.046875:I=SHARE_LUMA Y 0.8676776 U 0.949885 V 0.9511137 All 0.8952849
#
#fn="guided:mountain_adventurer:CHROMA:NOISE=10:RZ=10:CAT=1:MEANI=1.875,2,2.125:E=8,9,10:PREI=2.25:I='SHARE_LUMA'.stats.bz2"
#bzcat "stats/$fn" | sort -k 9 -n | tail
#
# OUTPUT: 
# BASELINE=NOISE=10 Y 0.830653 U 0.699357 V 0.6967635 All 0.7864555
# MEANI=2.125:E=10:PREI=2.25:I=SHARE_LUMA Y 0.8305817 U 0.9632354 V 0.9614184 All 0.8744967
# MEANI=2.125:E=9:PREI=2.25:I=SHARE_LUMA Y 0.8305817 U 0.9632353 V 0.9614184 All 0.8744967
# MEANI=2.125:E=8:PREI=2.25:I=SHARE_LUMA Y 0.8305817 U 0.9632358 V 0.9614184 All 0.8744969
# MEANI=1.875:E=8:PREI=2.25:I=SHARE_LUMA Y 0.8305818 U 0.9647062 V 0.9629304 All 0.874994
# MEANI=1.875:E=9:PREI=2.25:I=SHARE_LUMA Y 0.8305818 U 0.9647071 V 0.9629304 All 0.874994
# MEANI=1.875:E=10:PREI=2.25:I=SHARE_LUMA Y 0.8305818 U 0.9647064 V 0.9629304 All 0.8749941
# MEANI=2:E=8:PREI=2.25:I=SHARE_LUMA Y 0.8305822 U 0.9728378 V 0.9710634 All 0.8777049
# MEANI=2:E=9:PREI=2.25:I=SHARE_LUMA Y 0.8305822 U 0.9728387 V 0.9710634 All 0.877705
# MEANI=2:E=10:PREI=2.25:I=SHARE_LUMA Y 0.8305822 U 0.9728394 V 0.9710635 All 0.8777051
#
### XXX test NLM LGC



